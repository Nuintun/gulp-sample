define("util/messenger/2.1.0/messenger",[],function(t,e,n){"use strict";var i="arale-messenger",r="postMessage"in window;function o(t,e){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=typeof t?n="target error - target itself must be window object":"string"!=typeof e&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=t,this.name=e}function s(t,e){this.targets={},this.name=t,this.listenFunc=[],i=e||i,this.initListen()}o.prototype.send=r?function(t){this.target.postMessage(i+t,"*")}:function(t){var e=window.navigator[i+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(i+t,window)},s.prototype.addTarget=function(t,e){this.targets[e]=new o(t,e)},s.prototype.initListen=function(){var t=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data),e=e.slice(i.length);for(var n=0;n<t.listenFunc.length;n++)t.listenFunc[n](e)};r?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[i+this.name]=e},s.prototype.listen=function(t){this.listenFunc.push(t)},s.prototype.clear=function(){this.listenFunc=[]},s.prototype.send=function(t){var e,n=this.targets;for(e in n)n.hasOwnProperty(e)&&n[e].send(t)},n.exports=s});