define("base/widget/1.2.0/widget",["base/base/1.2.0/base","base/jquery/1.11.3/jquery","./daparser","./auto-render"],function(e,t,n){"use strict";var i=e("base/base/1.2.0/base"),s=e("base/jquery/1.11.3/jquery"),r=e("./daparser"),a=e("./auto-render"),l=".delegate-events-",o={},d=i.extend({propsInAttrs:["initElement","element","events"],element:null,events:null,attrs:{id:null,className:null,style:null,template:"<div></div>",model:null,parentNode:document.body},initialize:function(e){this.cid="widget-"+h++;var t=this._parseDataAttrsConfig(e);d.superclass.initialize.call(this,e?s.extend(t,e):t),this.parseElement(),this.initProps(),this.delegateEvents(),this.setup(),this._stamp(),this._isTemplate=!(e&&e.element)},_parseDataAttrsConfig:function(e){var t,n;return e&&(t=e.initElement?s(e.initElement):s(e.element)),t&&t[0]&&!a.isDataApiOff(t)&&(n=r.parseElement(t)),n},parseElement:function(){var e=this.element;if(e?this.element=s(e):this.get("template")&&this.parseElementFromTemplate(),!this.element||!this.element[0])throw new Error("element is invalid")},parseElementFromTemplate:function(){this.element=s(this.get("template"))},initProps:function(){},delegateEvents:function(e,t,n){var i=y(Array.prototype.slice.call(arguments));if(0===i.length?(t=function(e){m(e.events)&&(e.events=e.events());return e.events}(this),e=this.element):1===i.length?(t=e,e=this.element):2===i.length?(n=t,t=e,e=this.element):(e||(e=this.element),this._delegateElements||(this._delegateElements=[]),this._delegateElements.push(s(e))),c(t)&&m(n)){var r={};r[t]=n,t=r}for(var a in t)if(t.hasOwnProperty(a)){var l=E(a,this),o=l.type,d=l.selector;!function(t,n){var i=function(e){m(t)?t.call(n,e):n[t](e)};d?s(e).on(o,d,i):s(e).on(o,i)}(t[a],this)}return this},undelegateEvents:function(e,t){var n=y(Array.prototype.slice.call(arguments));if(t||(t=e,e=null),0===n.length){var i=l+this.cid;if(this.element&&this.element.off(i),this._delegateElements)for(var r in this._delegateElements)this._delegateElements.hasOwnProperty(r)&&this._delegateElements[r].off(i)}else{var a=E(t,this);e?s(e).off(a.type,a.selector):this.element&&this.element.off(a.type,a.selector)}return this},setup:function(){},render:function(){this.rendered||(this._renderAndBindAttrs(),this.rendered=!0);var e,t=this.get("parentNode");if(t&&(e=this.element[0],!f(document.documentElement,e))){var n=this.constructor.outerBoxClass;if(n)(this._outerBox=s("<div></div>").addClass(n)).append(this.element).appendTo(t);else this.element.appendTo(t)}return this},_renderAndBindAttrs:function(){var e,t,n=this,i=n.attrs;for(var s in i)if(i.hasOwnProperty(s)){var r="_onRender"+((t=s).charAt(0).toUpperCase()+t.substring(1));if(this[r]){var a=this.get(s);null!=(e=a)&&e!==undefined&&this[r](a,undefined,s),function(e){n.on("change:"+s,function(t,i,s){n[e](t,i,s)})}(r)}}},_onRenderId:function(e){this.element.attr("id",e)},_onRenderClassName:function(e){this.element.addClass(e)},_onRenderStyle:function(e){this.element.css(e)},_stamp:function(){var e=this.cid;(this.initElement||this.element).attr("data-widget-cid",e),o[e]=this},$:function(e){return this.element.find(e)},destroy:function(){this.undelegateEvents(),delete o[this.cid],this.element&&this._isTemplate&&(this.element.off(),this._outerBox?this._outerBox.remove():this.element.remove()),this.element=null,d.superclass.destroy.call(this)}});s(window).unload(function(){for(var e in o)o[e].destroy()}),d.query=function(e){var t,n=s(e).eq(0);return n&&(t=n.attr("data-widget-cid")),o[t]},d.autoRender=a.autoRender,d.autoRenderAll=a.autoRenderAll,d.StaticsWhiteList=["autoRender"],n.exports=d;var u=Object.prototype.toString,h=0;function c(e){return"[object String]"===u.call(e)}function m(e){return"[object Function]"===u.call(e)}var f=s.contains||function(e,t){return!!(16&e.compareDocumentPosition(t))};var p=/^(\S+)\s*(.*)$/,v=/{{([^}]+)}}/g,g="INVALID_SELECTOR";function E(e,t){var n,i=e.match(p),s=i[1]+l+t.cid,r=i[2]||undefined;return r&&r.indexOf("{{")>-1&&(n=t,r=r.replace(v,function(e,t){for(var i,s=t.split("."),r=n;i=s.shift();)r=r===n.attrs?n.get(i):r[i];return c(r)?r:g})),{type:s,selector:r}}function y(e){for(var t=e.length-1;t>=0&&e[t]===undefined;t--)e.pop();return e}});