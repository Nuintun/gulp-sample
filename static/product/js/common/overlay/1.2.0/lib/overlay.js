define("common/overlay/1.2.0/lib/overlay",["base/jquery/1.11.3/jquery","util/position/1.1.0/position","util/iframe-shim/1.1.0/iframe-shim","base/widget/1.2.0/widget"],function(e,t,i){"use strict";var s,n=e("base/jquery/1.11.3/jquery"),o=e("util/position/1.1.0/position"),r=e("util/iframe-shim/1.1.0/iframe-shim"),l=e("base/widget/1.2.0/widget").extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:o.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var e=this;this._setupShim(),this._setupResize(),this.after("render",function(){var e=this.element.css("position");"static"!==e&&"relative"!==e||this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){e._setPosition()})},destroy:function(){return u(this,l.allOverlays),u(this,l.blurOverlays),l.superclass.destroy.call(this)},_setPosition:function(e){var t;if((t=this.element[0],n.contains(document.documentElement,t))&&(e||(e=this.get("align")),e)){var i="none"===this.element.css("display");return i&&this.element.css({visibility:"hidden",display:"block"}),o.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),i&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var e=new r(this.element);this.after("hide _setPosition",e.sync,e);var t=["width","height"];for(var i in t)t.hasOwnProperty(i)&&this.on("change:"+i,e.sync,e);this.before("destroy",e.destroy,e)},_setupResize:function(){l.allOverlays.push(this)},_blurHide:function(e){(e=n.makeArray(e)).push(this.element),this._relativeElements=e,l.blurOverlays.push(this)},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});l.blurOverlays=[],n(document).on("click",function(e){var t;t=e,n(l.blurOverlays).each(function(e,i){if(i&&i.get("visible")){for(var s=0;s<i._relativeElements.length;s++){var o=n(i._relativeElements[s])[0];if(o===t.target||n.contains(o,t.target))return}i.hide()}})});var h=n(window).width(),a=n(window).height();function u(e,t){for(var i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),t}l.allOverlays=[],n(window).resize(function(){s&&clearTimeout(s),s=setTimeout(function(){var e=n(window).width(),t=n(window).height();h===e&&a===t||n(l.allOverlays).each(function(e,t){t&&t.get("visible")&&t._setPosition()}),h=e,a=t},80)}),i.exports=l});