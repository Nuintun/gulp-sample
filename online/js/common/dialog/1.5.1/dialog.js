define("common/dialog/1.5.1/dialog.css.js",["import-style"],function(e,t,i){e("import-style")(".ui-dialog{background-color:rgba(0, 0, 0, 0.3);border:none;outline:none;filter:progid:DXImageTransform.Microsoft.Gradient(startColorstr='#4c000000', endColorstr='#4c000000');padding:8px;border-radius:3px;}:root .ui-dialog{filter:none \\9;}.ui-dialog-close{color:#999;cursor:pointer;display:block;font-family:tahoma, sans-serif;font-size:24px;font-weight:bold;height:18px;line-height:14px;position:absolute;right:16px;text-decoration:none;top:16px;z-index:10;}.ui-dialog-close:hover{color:#666;text-shadow:0 0 2px #aaa;text-decoration:none;}.ui-dialog-title{height:45px;font-size:16px;font-family:Microsoft YaHei, SimHei, Arial, sans-serif;line-height:46px;border-bottom:1px solid #e1e1e1;color:#4d4d4d;text-indent:20px;background-color:#f9f9f9;background:-webkit-gradient(linear, left top, left bottom, from(#fcfcfc), to(#f9f9f9));background:-moz-linear-gradient(top, #fcfcfc, #f9f9f9);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#f9f9f9');background:-o-linear-gradient(top, #fcfcfc, #f9f9f9);background:-ms-linear-gradient(top, #fcfcfc, #f9f9f9);background:linear-gradient(top, #fcfcfc, #f9f9f9);}.ui-dialog-content{background-color:#fff;}.ui-dialog-container{padding:15px 20px 20px;font-size:12px;}.ui-dialog-message{margin-bottom:15px;}.ui-dialog-operation{zoom:1;text-align:right;}.ui-dialog-confirm,.ui-dialog-cancel{display:inline;}.ui-dialog-operation .ui-dialog-confirm{margin-right:4px;}.ui-dialog .ui-dialog-button-orange,.ui-dialog .ui-dialog-button-white{display:inline-block;*display:inline;*zoom:1;text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;font-size:12px;font-weight:bold;border-radius:2px;padding:0 12px;line-height:23px;height:23px;*overflow:visible;background-image:none;}a.ui-dialog-button-orange:hover,a.ui-dialog-button-white:hover{text-decoration:none;}.ui-dialog .ui-dialog-button-orange{color:#fff;border:1px solid #d66500;background-color:#f57403;}.ui-dialog .ui-dialog-button-orange:hover{background-color:#fb8318;}.ui-dialog .ui-dialog-button-white{border:1px solid #afafaf;background-color:#f3f3f3;color:#777;}.ui-dialog .ui-dialog-button-white:hover{border:1px solid #8e8e8e;background-color:#fcfbfb;color:#676d70;}.ui-mask{background-image:url(/assets/images/background_stripe.png);}")}),define("common/dialog/1.5.1/dialog.tpl",[],function(e,t,i){i.exports='<div class="<?= classPrefix ?>">  <a class="<?= classPrefix ?>-close" title="Close" href="javascript:;" data-role="close"></a>  <div class="<?= classPrefix ?>-content" data-role="content"></div></div>'}),define("common/dialog/1.5.1/dialog",["./dialog.css.js","base/jquery/1.11.2/jquery","common/overlay/1.2.0/overlay","common/overlay/1.2.0/mask","base/events/1.2.0/events","base/templatable/0.10.0/templatable","util/messenger/2.1.0/messenger","./dialog.tpl"],function(e,t,i){function o(e){null==e.attr("tabindex")&&e.attr("tabindex","-1")}function n(e){var t=e[0].contentWindow.document;return t.body.scrollHeight&&t.documentElement.scrollHeight?Math.min(t.body.scrollHeight,t.documentElement.scrollHeight):t.documentElement.scrollHeight?t.documentElement.scrollHeight:t.body.scrollHeight?t.body.scrollHeight:void 0}function s(e){try{return!!e[0].contentWindow.document}catch(t){return!0}}function a(e,t){for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}-1!==i&&t.splice(i,1)}e("./dialog.css.js");var r=e("base/jquery/1.11.2/jquery"),l=e("common/overlay/1.2.0/overlay"),c=e("common/overlay/1.2.0/mask"),h=e("base/events/1.2.0/events"),g=e("base/templatable/0.10.0/templatable"),d=e("util/messenger/2.1.0/messenger"),f=l.extend({Implements:g,attrs:{template:e("./dialog.tpl"),trigger:{value:null,getter:function(e){return r(e)}},classPrefix:"ui-dialog",content:{value:null,setter:function(e){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(e)&&(this._type="iframe",(e.indexOf("?ajax")>0||e.indexOf("&ajax")>0)&&(this._ajax=!0)),e}},hasMask:!0,closeTpl:"Ã—",width:500,height:null,initialHeight:300,effect:"none",zIndex:999,autoFit:!0,align:{value:{selfXY:["50%","50%"],baseXY:["50%","42%"]},getter:function(e){return this.element.height()>.84*r(window).height()?{selfXY:["50%","0"],baseXY:["50%","0"]}:e}}},parseElement:function(){this.set("model",{classPrefix:this.get("classPrefix")}),f.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({height:"100%",zoom:1}),this.$("[data-role=close]").hide()},events:{"click [data-role=close]":function(e){e.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(this._ajax?this._ajaxHtml():(!this.get("height")&&this.contentElement.css("height",this.get("initialHeight")),this._showIframe())),f.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this._isCrossDomainIframe||this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),f.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),this._hideMask(),clearInterval(this._interval),f.superclass.destroy.call(this)},setup:function(){f.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),o(this.element),o(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(e){if("iframe"!==this._type){var t;try{t=r(e)}catch(i){t=[]}t[0]?this.contentElement.empty().append(t):this.contentElement.empty().html(e),this._setPosition()}},_onRenderCloseTpl:function(e){""===e?this.$("[data-role=close]").html(e).hide():this.$("[data-role=close]").html(e).show()},_onRenderVisible:function(e){e?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){this.delegateEvents(this.get("trigger"),"click",function(e){e.preventDefault(),this.activeTrigger=r(e.currentTarget),this.show()})},_setupMask:function(){var e=this;c._dialogs=c._dialogs||[],this.after("show",function(){if(this.get("hasMask")){c.set("zIndex",e.get("zIndex")).show(),c.element.insertBefore(e.element);for(var t,i=0;i<c._dialogs.length;i++)c._dialogs[i]===e&&(t=c._dialogs[i]);t?(a(t,c._dialogs),c._dialogs.push(t)):c._dialogs.push(e)}}),this.after("hide",this._hideMask)},_hideMask:function(){if(this.get("hasMask"))for(var e=c._dialogs?c._dialogs.length:0,t=0;e>t;t++)if(c._dialogs[t]===this)if(a(this,c._dialogs),0===c._dialogs.length)c.hide();else if(t===e-1){var i=c._dialogs[c._dialogs.length-1];c.set("zIndex",i.get("zIndex")),c.element.insertBefore(i.element)}},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){this.delegateEvents(r(document),"keyup.esc",function(e){27===e.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var e=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){e.get("visible")&&(e._isCrossDomainIframe=s(e.iframe),e._isCrossDomainIframe||(e.get("autoFit")&&(clearInterval(e._interval),e._interval=setInterval(function(){e._syncHeight()},300)),e._syncHeight()),e._setPosition(),e.trigger("complete:show"))})},_fixUrl:function(){var e=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return e.shift(),e[1]=(e[1]&&"?"!==e[1]?e[1]+"&":"?")+"t="+(new Date).getTime(),e.join("")},_createIframe:function(){var e=this;this.iframe=r("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),h.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){e.hide()});var t=new d("parent","arale-dialog");t.addTarget(this.iframe[0].contentWindow,"iframe1"),t.listen(function(t){switch(t=JSON.parse(t),t.event){case"close":e.hide();break;case"syncHeight":e._setHeight("px"===t.height.toString().slice(-2)?t.height:t.height+"px")}})},_setHeight:function(e){this.contentElement.css("height",e),this.element[0].className=this.element[0].className},_syncHeight:function(){var e;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,e=n(this.iframe)+"px"}catch(t){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(e=this.get("initialHeight"),clearInterval(this._interval),delete this._interval)}this._setHeight(e)}},_ajaxHtml:function(){var e=this;this.contentElement.css("height",this.get("initialHeight")),this.contentElement.load(this.get("content"),function(){e._setPosition(),e.contentElement.css("height",""),e.trigger("complete:show")})}});i.exports=f});